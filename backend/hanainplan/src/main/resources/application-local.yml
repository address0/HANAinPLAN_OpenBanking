# ==========================================
# Docker 컨테이너 연동용 로컬 개발 설정
# Docker Compose로 띄운 서비스들과 연동
# ==========================================
spring:
  datasource:
    # Docker MySQL 컨테이너 연결 (localhost:3306으로 포트 포워딩)
    url: jdbc:mysql://localhost:3306/${MYSQL_DATABASE}
    username: ${MYSQL_USER}
    password: ${MYSQL_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: update     # 애플리케이션 시작시 테이블 새로 생성 (기존 테이블 삭제)
    show-sql: true         # SQL 쿼리 로그 출력
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQLDialect
        # DDL 오류 무시 설정
        hbm2ddl:
          halt_on_error: false
        # 스키마 검증 비활성화
        javax:
          persistence:
            schema-generation:
              database:
                action: none

  # Docker 컨테이너 서비스들 연결
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 2000ms

    mongodb:
      host: localhost
      port: 27017
      database: ${MONGO_DATABASE}
      username: ${MONGO_ROOT_USERNAME}
      password: ${MONGO_ROOT_PASSWORD}

# 로컬 개발용 로깅 설정
logging:
  level:
    com.hanainplan: DEBUG
    org.springframework.web: DEBUG

# 은행 서버 URL 설정
bank:
  hana:
    base-url: ${HANA_BANK_URL:http://localhost:8081}
  kookmin:
    base-url: ${KOOKMIN_BANK_URL:http://localhost:8082}
  shinhan:
    base-url: ${SHINHAN_BANK_URL:http://localhost:8083}